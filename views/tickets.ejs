<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head>
        <meta charset="UTF-8">
        <title>task.io | Tasks</title>
        <link rel="stylesheet" href="public/assets/tasks.css">
        <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    </head>
    <body>
        <div class="sidebar">
            <div class="logo-details">
              <i class='bx bx-menu sidebarBtn'></i>
              <span class="logo_name">Task.io</span>
            </div>
            <ul class="nav-links">
                <li>
                  <a href="/" class="active">
                    <i class='bx bx-grid-alt' ></i>
                    <span class="links_name">Dashboard</span>
                  </a>
                </li>
                <li>
                  <a href="/groups">
                    <i class='bx bx-box' ></i>
                    <span class="links_name">Create a Group</span>
                  </a>
                </li>
                <li>
                  <a href="/tickets">
                    <i class='bx bx-task' ></i>
                    <span class="links_name">Tickets</span>
                  </a>
                </li>
                <!-- <li>
                  <a href="#">
                    <i class='bx bx-message' ></i>
                    <span class="links_name">Messages</span>
                  </a>
                </li> -->
                <li class="log_out">
                    <i class='bx bx-log-out'></i>
                    <form action="/logout?_method=DELETE" method = "POST">
                        <span class="links_name"><button class ="links_name">Log out</button></span>
                    </form>
                </li>
              </ul>
          </div>
          <section class="home-section">
            <nav>
              <div class="sidebar-button">
                <i class='bx bx-notepad'></i>
                <span class="dashboard">Tasks</span>
              </div>
              <div class="search-box">
                <input type="text" placeholder="Search...(CURRENTLY NOT FUNCTIONAL)">
                <i class='bx bx-search' ></i>
              </div>
              <div class="profile-details">
                <!--<img src="images/profile.jpg" alt="">-->
                <span class="admin_name">User Profile (CURRENTLY NOT FUNCTIONAL)</span>
                <i class='bx bx-chevron-down' ></i>
              </div>
            </nav>
            <div class="home-content">
                <span class="new_project">Create Ticket</span>
                <div class="new-boxes">
                    <button class="createBtn" onclick="showForm()">New<i class="bx bx-plus bx-sm"></i></button>
                </div>
                <div class="new-task-form" id="new-task-form">
                    <form action="/tickets" method = "POST">
                        <div>
                            <input type="text" id="ticketName" name="ticketName"
                            placeholder = "Ticket Name" required>
                        </div> 
                        <div>
                           <input type ="text" id="ticketDesc" name="ticketDesc"
                           placeholder = "Ticket Description" required>
                       </div> 
                       <div>
                           <input type="datetime-local" id="dueTime" name="dueTime"
                           placeholder = "Ticket Due Date & Time" required>
                       </div>
                       <button>Submit Ticket</button>
                </div>
                <% if (message) { %>
                  <div class="alert alert-info"><%= message %></div>
              <% } %>
             <span class="all_projects">Your Tickets</span>
                        <%
                        if(ticketInfo.length!=0){
                        var i=1;
                        ticketInfo.forEach(function(ticketData){
                        %>
                        <div class="overview-boxes">
                          <div class="box">
                            <div class="right-side">
                        <table>
                          <tr>
                            <th>Ticket Name</th>
                            <th>Ticket Description</th>
                            <th>Creation Date </th>
                            <th>Due Date</th>
                          </tr>
                        <tr>
                        <td><%=ticketData.ticketName %></td>
                        <td><%=ticketData.ticketDescription %></td>
                        <td><%=new Date(ticketData.createDate) %></td>
                        <td><%=new Date(ticketData.dueDate)%></td>
                        </tr>
                      </table>
                    </div>
                  </div>
                </div>
                      <% i++ })} %>


            </div>
          </section>
          <script>
          function showForm(){
                  document.getElementById("new-task-form").style.display = 'block';
                }
              function hideForm(){
                  document.getElementById("new-task-form").style.display = 'none';
                }
          </script>
    </body>
</html>